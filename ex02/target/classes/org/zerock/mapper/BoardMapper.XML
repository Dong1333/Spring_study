<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<!--namespace 속성값은 Mapper 인터페이스와 동일한 이름으로 작성.  -->
<mapper namespace="org.zerock.mapper.BoardMapper">

	<!--id 속성값은 메서드의 이름과 일치하게 작성
		resuletType 속성 값은 select 쿼리의 결과를 특정 클래스의 객체로 만들기 위해 설정 -->
	<select id="getList" resultType="org.zerock.domain.BoardVO">
		<!--CDATA 부분은 XML에서 부등호를 사용하기 위해서 사용  -->
		<![CDATA[
		select * from tbl_board where bno >0 
		]]>
	</select>

	<!-- create(intsert) 처리 / 생성된 PK 값을 알 필요가 없는 경우 -->
	<insert id="insert">
		insert into tbl_board (bno,title,content,writer)
		values (seq_board.nextval, #{title}, #{content}, #{writer})
	</insert>
	
	<!-- create(intsert) 처리 / 생성된 PK 값을 알 필요가 있는 경우 -->
	<insert id = "insertSelectKey">
		<selectKey keyProperty="bno" order="BEFORE"
			resultType="long">
			select seq_board.nextval from dual
		</selectKey>
		
		insert into tbl_board (bno, title, content, writer)
		values (#{bno}, #{title}, #{content}, #{writer})
	</insert>
	
	<!-- read(select) 처리 
	 MyBatis는 bno라는 칼럼이 존재하면 인스턴스의 ‘setBno()’를 호출하게 된다.
	  #{속성}이 1개만 존재하면 별도의 get 파라미터명()을 사용하지 않고 처리된다-->
	<select id="read" resultType="org.zerock.domain.BoardVO">
		select * from tbl_board where bno = #{bno}
	</select>
	
	<!-- PK(bno) 값을 이용한 데이터 삭제 작업-->
	<delete id = "delete">
	 	delete tbl_board where bno = #{bno}
	</delete>
	
	<!-- PK(bno) 값을 이용한 데이터 업데이트 작업-->
	<update id = "update"> 
		update tbl_board
		set title = #{title},
		content=#{content}, 
		writer = #{writer}, 
		updateDate = sysdate
		where bno = #{bno} 
	</update>
		
</mapper>


